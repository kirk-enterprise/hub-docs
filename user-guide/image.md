# 3.3 镜像管理
镜像是docker的image概念，以`空间名/仓库名：版本号`的形式存储在七牛镜像仓库。

## 3.3.1 属性说明

![镜像仓库管理主页面](_figures/user-guide/image-detail.jpeg)

**1.版本号：**docker的image tag概念，遵循image tag的命名规则。

?> **备注：**用户可以为镜像做额外的文字说明，最大支持20个字符。

**2.大小：**镜像上传到仓库后，在仓库内的存储大小。

!> 同一个镜像在本地和仓库会出现大小不一致，这属于正常行为。镜像推送到仓库会做一次压缩，这并不影响镜像的使用。

**3.更新时间：**该镜像推送入库的时间。
***

## 3.3.2 如何推送本地镜像到仓库

![镜像仓库管理主页面](_figures/user-guide/image-push.png)

操作如下：

**1）登录七牛镜像中心服务器**

`docker login reg.qiniu.com -u {你的七牛账号} -p {密码}`

返回`Login Succeeded`即为登入成功

**2）为本地镜像标记tag**

`docker tag {镜像名或id} reg.qiniu.com/{命名空间}/{镜像名}:{标签}`

例如，

`docker tag nginx:latest reg.qiniu.com/mynamespace/mynginx:mytag`

**3）推送镜像到仓库**

`docker push reg.qiniu.com/{命名空间}/{镜像名}:{标签}`

?> 如果推送的仓库地址不存在，会自动生成一个和命令行中`{镜像名}`同名的仓库，仓库类型(公开/私有)自动设置成命令行中`{命名空间}`的同类型。

!> 推送已经存在的镜像版本到仓库，会使用新版本的镜像覆盖老版本镜像
***

## 3.3.3 如何拉取仓库镜像到本地
镜像仓库分「公开」和「私有」两种，在拉取公开镜像仓库时，只需要在本地终端通过命令行`docker pull reg.qiniu.com/{命名空间}/{镜像名}:{标签}}`实现。但是当拉取私有镜像仓库时，需要先对拉取人员进行鉴权。以下主要讲如何通过鉴权拉取到私有镜像。

![镜像仓库管理主页面](_figures/user-guide/image-pull.jpeg)

**1）登陆七牛镜像中心服务器**

`docker login reg.qiniu.com -u {你的七牛账号} -p {密码}`

返回`Login Succeeded`即为登入成功

**2）拉取镜像到本地**

`docker pull reg.qiniu.com/{命名空间}/{镜像名}:{标签}`
***

## 3.3.4 如何隐藏镜像
隐藏镜像能够将「镜像版本」中一些暂时不会使用，或者永远不会使用的镜像迁移到一个镜像的隐藏列表，正常使用的时候将不再可见。镜像的隐藏并不会影响到镜像`docker pull`的功能。

!> 如果推送了和某个隐藏中镜像同版本号的新镜像，隐藏的镜像会被删除，新的镜像会被推送入库且正常显示。

操作如下：

**1）点击控制台左边栏的「镜像仓库」，进入仓库列表页面**

**2）点击持续构建仓库右侧的「管理」，进入仓库详情**

**3）点击「镜像版本」tab，进入镜像版本子页面**

**4）点击镜像版本右侧的「隐藏」**

![创建新的仓库](_figures/user-guide/image-hide.jpeg)
***

## 3.3.5 如何显示被隐藏的镜像
操作如下：

**1）点击控制台左边栏的「镜像仓库」，进入仓库列表页面**

**2）点击持续构建仓库右侧的「管理」，进入仓库详情**

**3）点击「镜像版本」tab，进入镜像版本子页面**

**4）勾选镜像版本列表顶部右侧的「显示被隐藏的版本号」**

![创建新的仓库](_figures/user-guide/image-hide-appear.jpeg)
***

## 3.3.6 如何取消隐藏镜像
操作如下：

**1）点击控制台左边栏的「镜像仓库」，进入仓库列表页面**

**2）点击持续构建仓库右侧的「管理」，进入仓库详情**

**3）点击「镜像版本」tab，进入镜像版本子页面**

**4）勾选镜像版本列表顶部右侧的「显示被隐藏的版本号」**

**4）点击被隐藏镜像版本右侧的「取消隐藏」**

![创建新的仓库](_figures/user-guide/image-unhide.jpeg)






